@* Areas/RealEstateAdmin/Views/Settings/Email.cshtml *@
@{
    Layout = "~/Areas/RealEstateAdmin/Views/Shared/_AdminLayout.cshtml";
    ViewData["Title"] = "Email & SMTP";
}

<div class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1 class="m-0">Cấu hình Email & SMTP</h1>
            </div>
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item"><a href="/RealEstateAdmin/dashboard">Home</a></li>
                    <li class="breadcrumb-item">Cấu hình</li>
                    <li class="breadcrumb-item active">Email & SMTP</li>
                </ol>
            </div>
        </div>
    </div>
</div>

<section class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-8">
                <!-- SMTP Settings -->
                <div class="card">
                    <div class="card-header bg-primary">
                        <h3 class="card-title">Cấu hình SMTP</h3>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i> Cấu hình SMTP để gửi email tự động (đăng ký, quên mật khẩu, thông báo...)
                        </div>

                        <div class="form-group">
                            <label>SMTP Host <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" value="@ViewBag.SmtpHost" placeholder="smtp.gmail.com">
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>SMTP Port <span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" value="@ViewBag.SmtpPort" placeholder="587">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Encryption</label>
                                    <select class="form-control">
                                        <option value="tls" selected>TLS</option>
                                        <option value="ssl">SSL</option>
                                        <option value="none">None</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>SMTP Username <span class="text-danger">*</span></label>
                            <input type="email" class="form-control" value="@ViewBag.SmtpUser" placeholder="your-email@gmail.com">
                        </div>

                        <div class="form-group">
                            <label>SMTP Password <span class="text-danger">*</span></label>
                            <input type="password" class="form-control" value="**********************" placeholder="Mật khẩu hoặc App Password">
                            <small class="text-muted">
                                <i class="fas fa-exclamation-triangle"></i> Với Gmail, dùng <strong>App Password</strong> thay vì mật khẩu thường
                            </small>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Tên người gửi</label>
                                    <input type="text" class="form-control" value="@ViewBag.SenderName" placeholder="HomeLengo Support">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Email người gửi</label>
                                    <input type="email" class="form-control" value="noreply@homelengo.vn">
                                </div>
                            </div>
                        </div>

                        <hr>

                        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#testEmailModal">
                            <i class="fas fa-paper-plane"></i> Gửi email test
                        </button>
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-save"></i> Lưu cấu hình
                        </button>
                    </div>
                </div>

                <!-- Email Templates -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Mẫu Email</h3>
                    </div>
                    <div class="card-body">
                        <div class="list-group">
                            <a href="#" class="list-group-item list-group-item-action">
                                <div class="d-flex w-100 justify-content-between">
                                    <h5 class="mb-1">Email chào mừng</h5>
                                    <small class="badge badge-success">Kích hoạt</small>
                                </div>
                                <p class="mb-1">Gửi khi người dùng đăng ký tài khoản mới</p>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                <div class="d-flex w-100 justify-content-between">
                                    <h5 class="mb-1">Quên mật khẩu</h5>
                                    <small class="badge badge-success">Kích hoạt</small>
                                </div>
                                <p class="mb-1">Email reset password</p>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                <div class="d-flex w-100 justify-content-between">
                                    <h5 class="mb-1">Thông báo tin mới</h5>
                                    <small class="badge badge-secondary">Tắt</small>
                                </div>
                                <p class="mb-1">Thông báo khi có tin BĐS phù hợp</p>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                <div class="d-flex w-100 justify-content-between">
                                    <h5 class="mb-1">Xác nhận giao dịch</h5>
                                    <small class="badge badge-success">Kích hoạt</small>
                                </div>
                                <p class="mb-1">Email xác nhận mua gói dịch vụ</p>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <!-- Hướng dẫn -->
                <div class="card card-info">
                    <div class="card-header">
                        <h3 class="card-title">Hướng dẫn cấu hình Gmail</h3>
                    </div>
                    <div class="card-body">
                        <ol class="pl-3">
                            <li class="mb-2">Đăng nhập Gmail</li>
                            <li class="mb-2">Vào <strong>Manage Account</strong></li>
                            <li class="mb-2">Chọn <strong>Security</strong></li>
                            <li class="mb-2">Bật <strong>2-Step Verification</strong></li>
                            <li class="mb-2">Tạo <strong>App Password</strong></li>
                            <li class="mb-2">Copy mật khẩu và dán vào form</li>
                        </ol>
                        <hr>
                        <p><strong>Thông số Gmail:</strong></p>
                        <ul>
                            <li>Host: <code>smtp.gmail.com</code></li>
                            <li>Port: <code>587</code></li>
                            <li>Encryption: <code>TLS</code></li>
                        </ul>
                    </div>
                </div>

                <!-- Email Statistics -->
                <div class="card card-success">
                    <div class="card-header">
                        <h3 class="card-title">Thống kê Email</h3>
                    </div>
                    <div class="card-body">
                        <div class="info-box">
                            <span class="info-box-icon bg-info"><i class="fas fa-paper-plane"></i></span>
                            <div class="info-box-content">
                                <span class="info-box-text">Email đã gửi</span>
                                <span class="info-box-number">1,245</span>
                            </div>
                        </div>
                        <div class="info-box">
                            <span class="info-box-icon bg-success"><i class="fas fa-check"></i></span>
                            <div class="info-box-content">
                                <span class="info-box-text">Thành công</span>
                                <span class="info-box-number">1,189</span>
                            </div>
                        </div>
                        <div class="info-box">
                            <span class="info-box-icon bg-danger"><i class="fas fa-times"></i></span>
                            <div class="info-box-content">
                                <span class="info-box-text">Thất bại</span>
                                <span class="info-box-number">56</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Modal Test Email -->
<div class="modal fade" id="testEmailModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-info">
                <h4 class="modal-title">Gửi Email Test</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Email nhận test</label>
                    <input type="email" class="form-control" placeholder="test@example.com">
                </div>
                <div class="alert alert-warning">
                    <i class="fas fa-info-circle"></i> Email test sẽ được gửi để kiểm tra cấu hình SMTP
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                <button type="button" class="btn btn-primary">
                    <i class="fas fa-paper-plane"></i> Gửi ngay
                </button>
            </div>
        </div>
    </div>
</div>