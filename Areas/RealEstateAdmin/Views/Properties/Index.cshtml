@* Views/Admin/Properties/Index.cshtml *@
@model IEnumerable<dynamic>
@{
    Layout = "~/Areas/RealEstateAdmin/Views/Shared/_AdminLayout.cshtml";
    ViewData["Title"] = "Quản lý Bất động sản";
}

<div class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1 class="m-0">Quản lý Bất động sản</h1>
            </div>
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item"><a href="/admin/dashboard">Home</a></li>
                    <li class="breadcrumb-item active">Bất động sản</li>
                </ol>
            </div>
        </div>
    </div>
</div>

<section class="content">
    <div class="container-fluid">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Danh sách Bất động sản</h3>
                <div class="card-tools">
                    <a href="/RealEstateAdmin/properties/create" class="btn btn-primary btn-sm">
                        <i class="fas fa-plus"></i> Thêm BĐS
                    </a>
                </div>
            </div>

            <div class="card-body">
                <!-- Filters -->
                <div class="row mb-3">
                    <div class="col-md-3">
                        <input type="text" class="form-control" placeholder="Tìm kiếm...">
                    </div>
                    <div class="col-md-2">
                        <select class="form-control">
                            <option>Tất cả loại</option>
                            <option>Chung cư</option>
                            <option>Nhà riêng</option>
                            <option>Đất nền</option>
                            <option>Biệt thự</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select class="form-control">
                            <option>Tất cả trạng thái</option>
                            <option>Đang bán</option>
                            <option>Cho thuê</option>
                            <option>Chờ duyệt</option>
                            <option>Đã bán</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-info"><i class="fas fa-search"></i> Tìm</button>
                    </div>
                </div>

                <!-- Table -->
                <div class="table-responsive">
                    <table class="table table-bordered table-hover">
                        <thead class="bg-light">
                            <tr>
                                <th width="5%">ID</th>
                                <th width="10%">Ảnh</th>
                                <th width="30%">Tiêu đề</th>
                                <th width="10%">Loại</th>
                                <th width="12%">Giá</th>
                                <th width="10%">Trạng thái</th>
                                <th width="8%">VIP</th>
                                <th width="15%">Hành động</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var property in Model)
                            {
                                <tr>
                                    <td>@property.Id</td>
                                    <td>
                                        <img src="@property.Image" alt="Property" class="img-thumbnail" style="max-height: 60px;">
                                    </td>
                                    <td>
                                        <strong>@property.Title</strong>
                                    </td>
                                    <td>@property.Type</td>
                                    <td><span class="text-danger font-weight-bold">@string.Format("{0:N0}", property.Price) @(property.Currency ?? "VNĐ")</span></td>
                                    <td>
                                        @if (property.Status == "Đang bán")
                                        {
                                            <span class="badge badge-success">@property.Status</span>
                                        }
                                        else if (property.Status == "Chờ duyệt")
                                        {
                                            <span class="badge badge-warning">@property.Status</span>
                                        }
                                        else if (property.Status == "Cho thuê")
                                        {
                                            <span class="badge badge-info">@property.Status</span>
                                        }
                                        else
                                        {
                                            <span class="badge badge-secondary">@property.Status</span>
                                        }
                                    </td>
                                    <td>
                                        @if (property.IsVip)
                                        {
                                            <span class="badge badge-danger"><i class="fas fa-star"></i> VIP</span>
                                        }
                                        else
                                        {
                                            <span class="text-muted">-</span>
                                        }
                                    </td>
                                    <td>
                                        <div class="btn-group">
                                            <button class="btn btn-sm btn-info" title="Xem">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <a href="/RealEstateAdmin/properties/edit/@property.Id" class="btn btn-sm btn-warning" title="Sửa">
                                                <i class="fas fa-edit"></i>
                                            </a>
                                            <form asp-action="Delete" asp-route-id="@property.Id" method="post" style="display:inline;" onsubmit="return confirm('Bạn có chắc chắn muốn xóa bất động sản này?');">
                                                <button type="submit" class="btn btn-sm btn-danger" title="Xóa">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </form>
                                        </div>
                                        @if (property.Status == "Chờ duyệt")
                                        {
                                            <button class="btn btn-sm btn-success mt-1" title="Duyệt">
                                                <i class="fas fa-check"></i> Duyệt
                                            </button>
                                        }
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="row mt-3">
                    <div class="col-sm-5">
                        <div class="dataTables_info">Hiển thị 1 đến 5 của 50 bản ghi</div>
                    </div>
                    <div class="col-sm-7">
                        <ul class="pagination pagination-sm float-right">
                            <li class="page-item"><a class="page-link" href="#">«</a></li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item"><a class="page-link" href="#">»</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
