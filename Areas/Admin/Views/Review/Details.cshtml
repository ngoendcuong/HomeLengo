@model HomeLengo.Models.Review
@{
    ViewData["Title"] = "Review Details";
}

<div class="main-content">
    <div class="main-content-inner">
        <div class="button-show-hide show-mb">
            <span class="body-1">Show Dashboard</span>
        </div>

        <div class="d-flex justify-content-between align-items-center mb-4">
            <h4 class="fw-7">Review Details</h4>
            <a href="/Admin/Review" class="tf-btn btn-line">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                    <path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Back to Reviews
            </a>
        </div>

        <div class="widget-box-2">
            <div class="review-detail">
                <!-- User Information -->
                <div class="user-box mb-4">
                    @{
                        var userAvatar = !string.IsNullOrEmpty(Model.User?.Avatar) ? Model.User.Avatar : "avatarMacDinh.jpg";
                        var avatarPath = $"~/assets/images/avatar/{userAvatar}";
                        var userName = Model.User?.FullName ?? Model.User?.Username ?? "Unknown User";
                        var userEmail = Model.User?.Email ?? "N/A";
                    }
                    <div class="avatar">
                        <img src="@Url.Content(avatarPath)" alt="@userName" onerror="this.onerror=null; this.src='@Url.Content("~/assets/images/avatar/avatarMacDinh.jpg")'">
                    </div>
                    <div class="content">
                        <div class="name fw-6">@userName</div>
                        <div class="caption-2 text-variant-3">@userEmail</div>
                        <div class="caption-2 text-variant-3 mt-1">
                            @if (Model.CreatedAt.HasValue)
                            {
                                <span>Created: @Model.CreatedAt.Value.ToString("MMM dd, yyyy HH:mm")</span>
                            }
                            else
                            {
                                <span>Created: N/A</span>
                            }
                        </div>
                    </div>
                </div>

                <!-- Rating -->
                <div class="mb-4">
                    <div class="fw-6 mb-2">Rating</div>
                    <ul class="list-star">
                        @for (int i = 0; i < 5; i++)
                        {
                            <li class="icon @(i < Model.Rating ? "icon-star" : "icon-star-empty")"></li>
                        }
                        <li class="ms-2"><span class="fw-6">@Model.Rating / 5</span></li>
                    </ul>
                </div>

                <!-- Title -->
                <div class="mb-4">
                    <div class="fw-6 mb-2">Title</div>
                    <div class="text">@(Model.Title ?? "No title")</div>
                </div>

                <!-- Review Content -->
                <div class="mb-4">
                    <div class="fw-6 mb-2">Review Content</div>
                    <div class="text">@(Model.Body ?? "No review content")</div>
                </div>

                <!-- Property Information -->
                @if (Model.Property != null)
                {
                    <div class="mb-4">
                        <div class="fw-6 mb-2">Property</div>
                        <div class="property-info">
                            <a href="/Property/Details/@Model.Property.PropertyId" class="text-primary fw-6" style="text-decoration: none;">
                                <span class="icon icon-home" style="margin-right: 8px;"></span>
                                @Model.Property.Title
                            </a>
                            <div class="caption-2 text-variant-3 mt-1">
                                Property ID: @Model.Property.PropertyId
                            </div>
                        </div>
                    </div>
                }

                <!-- Status -->
                <div class="mb-4">
                    <div class="fw-6 mb-2">Status</div>
                    <span class="btn-status @(Model.IsApproved == true ? "" : "status-pending")">
                        @(Model.IsApproved == true ? "Approved" : "Pending")
                    </span>
                </div>

                <!-- Actions -->
                <div class="d-flex gap-2 mt-4 pt-4 border-top">
                    <form method="post" action="/Admin/Review/ToggleApproved/@Model.ReviewId" style="display:inline;">
                        @Html.AntiForgeryToken()
                        <button type="submit" class="tf-btn @(Model.IsApproved == true ? "btn-line" : "primary")">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                                <path d="M13.5 4L6 11.5L2.5 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            @(Model.IsApproved == true ? "Unapprove" : "Approve")
                        </button>
                    </form>
                    <form method="post" action="/Admin/Review/Delete/@Model.ReviewId" style="display:inline;">
                        @Html.AntiForgeryToken()
                        <button type="submit" class="tf-btn btn-line text-danger" onclick="return confirm('Are you sure you want to delete this review?');">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                                <path d="M9.82667 6.00035L9.596 12.0003M6.404 12.0003L6.17333 6.00035M12.8187 3.86035C13.0467 3.89501 13.2733 3.93168 13.5 3.97101M12.8187 3.86035L12.1067 13.1157C12.0776 13.4925 11.9074 13.8445 11.63 14.1012C11.3527 14.3579 10.9886 14.5005 10.6107 14.5003H5.38933C5.0114 14.5005 4.64735 14.3579 4.36999 14.1012C4.09262 13.8445 3.92239 13.4925 3.89333 13.1157L3.18133 3.86035M12.8187 3.86035C12.0492 3.74403 11.2758 3.65574 10.5 3.59568M3.18133 3.86035C2.95333 3.89435 2.72667 3.93101 2.5 3.97035M3.18133 3.86035C3.95076 3.74403 4.72416 3.65575 5.5 3.59568M10.5 3.59568V2.98501C10.5 2.19835 9.89333 1.54235 9.10667 1.51768C8.36908 1.49411 7.63092 1.49411 6.89333 1.51768C6.10667 1.54235 5.5 2.19901 5.5 2.98501V3.59568M10.5 3.59568C8.83581 3.46707 7.16419 3.46707 5.5 3.59568" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            Delete Review
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-dashboard footer-dashboard-2">
        <p>Copyright Â© 2024 Home Lengo</p>
    </div>
</div>

<style>
    .review-detail {
        padding: 20px;
    }
    .user-box {
        display: flex;
        align-items: flex-start;
        gap: 16px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 8px;
    }
    .user-box .avatar {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        overflow: hidden;
        flex-shrink: 0;
    }
    .user-box .avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    .user-box .content {
        flex: 1;
    }
    .user-box .name {
        font-size: 18px;
        color: #1a1a1a;
        margin-bottom: 4px;
    }
    .list-star {
        display: flex;
        align-items: center;
        gap: 4px;
        list-style: none;
        padding: 0;
        margin: 0;
    }
    .list-star .icon {
        color: #ffc107;
        font-size: 18px;
    }
    .list-star .icon-star-empty {
        color: #e0e0e0;
    }
    .review-detail .text {
        color: #666;
        line-height: 1.6;
        padding: 12px;
        background: #f8f9fa;
        border-radius: 4px;
    }
    .property-info {
        padding: 12px;
        background: #f8f9fa;
        border-radius: 4px;
    }
</style>















